// room script file
int facechangecount=0;
int facechangetime=60;
int facechange=2;
bool isAltFace=false;
int faces[5];
int defaultface=571;


function room_Load()
{
Mouse.Mode=2;
gIconbar.Visible=false;
musicChannel = aSpookybackground01.Play();
musicChannel.Volume=0;
}

function room_FirstLoad()
{
cSteve.AddInventory(iACH01); // talk to cat I'm evidently using a second character to hold the player's achievements!
cSteve.AddInventory(iACH02); // full cat conversation
cSteve.AddInventory(iACH03); // die human no eyes
cSteve.AddInventory(iACH04); // die attic 1
cSteve.AddInventory(iACH05); // die attic 2
cSteve.AddInventory(iACH06); // die dynamite
cSteve.AddInventory(iACH07); // die meat grinder
cSteve.AddInventory(iACH08); // die 10 times
cSteve.AddInventory(iACH09); // die 100 times
cSteve.AddInventory(iACH10); // beat Brian's time

faces[0]=572;
faces[1]=573;
faces[2]=574;
faces[3]=575;
faces[4]=576;

Button42.Y=-100;
}

function room_RepExec()
{
  facechangecount++;
  if (facechangecount>facechangetime)
  {
    facechangecount=0;
    if (!isAltFace)
    {
      isAltFace=true;
      int index = Random(6);
      //Button41.NormalGraphic=faces[index];
      if (index>3)
      {
        Wait(WaitGUI);
        Button41.NormalGraphic=577;
        Wait(WaitGUI);
        Button41.NormalGraphic=578;
        Wait(WaitGUI);
        Button41.NormalGraphic=579;
        Wait(WaitGUI);
        Button41.NormalGraphic=580;
        Wait(WaitGUI);
        Button41.NormalGraphic=579;
        Wait(WaitGUI);
        Button41.NormalGraphic=578;
        Wait(WaitGUI);
        Button41.NormalGraphic=577;
        Wait(WaitGUI);
        Button41.NormalGraphic=571;
      }
      else
      {
        Button41.NormalGraphic=faces[index];
      }
      //revert face setup
      facechangetime=Random(30)+30;
    }
    else
    {
      Button41.NormalGraphic=defaultface;
      isAltFace=false;
      //reset facechangecount
      facechangetime=Random(90)+60;
      facechangecount=0;
    }
  }
}
